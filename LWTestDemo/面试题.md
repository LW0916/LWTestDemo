OC的本质面试题

    1.一个NSObject占用了多少个字节?
        系统分配了16个字节给NSObject对象（可以通过malloc_size函数获得）
        但NSObject对象内部使用了8个字节空间（64位环境下 通过class_getInstanceSize函数获得）
        FC requires all objects be at least 16bytes
 
    2.对象的isa指针指向哪里？
        1) instance的isa指向class
        2）class的isa指向meta-class
        3）meta-class的isa指向基类的meta-class
        4）基类的meta-class的isa指向自己
    superclass指向指向:
        1)class的superclass指向父类的class
            如果没有父类，superclass指针指向nil
        2)meta-class的superclass指向父类的meta-class
        3)基类的meta-class的superclass指向基类
    3.OC的类信息存放在哪里？
        对象方法，属性，成员变量，协议信息，存放在class对象中。
        类方法，存放在meta-class对象中。
        成员变量的具体值放在实例对象中。
    4.iOS中的 isKindOfClass 和 isMemberOfClass
     BOOL res1 = [(id)[NSObject class] isKindOfClass:[NSObject class]];
     BOOL res2 = [(id)[NSObject class] isMemberOfClass:[NSObject class]];
     BOOL res3 = [(id)[TestObject class] isKindOfClass:[TestObject class]];
     BOOL res4 = [(id)[TestObject class] isMemberOfClass:[TestObject class]];
    答案：除了第一个是YES，其他三个都是NO。
     + (BOOL)isMemberOfClass:(Class)cls {
         return object_getClass((id)self) == cls;
     }

     - (BOOL)isMemberOfClass:(Class)cls {
         return [self class] == cls;
     }

     + (BOOL)isKindOfClass:(Class)cls {
         for (Class tcls = object_getClass((id)self); tcls; tcls = tcls->super_class) {
             if(tcls == cls) return YES;
         }
         return NO；
     }
     -（BOOL)isKindOfClass:(Class)cls {
         for(Class tcls = [self class]; tcls; tcls = tcls->super_class) {
             if(tcls == cls) return YES;
         }
         return NO;
     }

KOV

    1.iOS用什么方式实现对一个对象的KVO?(KVO的本质是什么？)
        利用runtimeAPI动态特性生成一个子类，并且让instance对象isa指向这个全新的子类。
        当修改instance对象的属性时，会调用foundation的_NSSetXXXValeuAndNotify
            willChangeValueForKey：
            父类原来的setter方法
            didChangeValueForKey:
        内部会调用监听器的 observeValueForKeyPath: ofObject:(id)object change:e context:
        
    2.如何手动触发KVO?
        willChangeValueForKey
        改变属性值
        didChangeValueForKey
        
KVC
    
    1.通过KVC修改属性会触发KVO吗？
        会触发KVO
        willChangeValueForKey
        改变属性值
        didChangeValueForKey
    2.KVC赋值
    
    

